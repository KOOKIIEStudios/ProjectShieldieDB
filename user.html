<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>swordie_db.user API documentation</title>
<meta name="description" content="This module holds the User class for the SwordieDB package â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>swordie_db.user</code></h1>
</header>
<section id="section-intro">
<p>This module holds the User class for the SwordieDB package.</p>
<p>Copyright 2020 TEAM SPIRIT. All rights reserved.
Use of this source code is governed by a MIT-style license that can be found in the LICENSE file.
Refer to database.py or the project wiki on GitHub for usage examples.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;This module holds the User class for the SwordieDB package.

Copyright 2020 TEAM SPIRIT. All rights reserved.
Use of this source code is governed by a MIT-style license that can be found in the LICENSE file.
Refer to database.py or the project wiki on GitHub for usage examples.
&#34;&#34;&#34;
import mysql.connector as con


class User:
    &#34;&#34;&#34;User object; models SwordieMS users.

    Using instance method SwordieDB::get_user_by_username(username) or the SwordieDB::get_char_by_name(name).user getter
    will create a User object instance with attributes identical to the user with username &#34;username&#34;
    (or IGN &#34;name&#34; for the latter) in the connected Swordie-based database.
    This class contains the appropriate getter and setter methods for said attributes.

    Attributes:
        account_type: Integer, representing the level of authority
        ban_reason: String (256 Char), representing the reason the user is banned
        donation_points: Integer, representing the amount of DP the user has
        maple_points: Integer, representing the amount of Maple Points the user has
        nx_prepaid: Integer, representing the amoung of NX Prepaid the user has
        user_id: Integer, representing the User ID
        vote_points: Integer, representing the amount of VP the user has
    &#34;&#34;&#34;

    def __init__(self, user_stats, database_config):
        &#34;&#34;&#34;Emulates how user object is handled server-sided

        Args:
            user_stats: dictionary of user attributes, formatted in SwordieMS style
            database_config: dictionary of protected attributes from a SwordieDB object
        &#34;&#34;&#34;

        self._user_stats = user_stats
        self._database_config = database_config

        self._id = 0
        self._ban_reason = &#34;&#34;
        self._vote_points = 0
        self._donation_points = 0
        self._maple_points = 0
        self._nx_prepaid = 0
        self._account_type = 0
        self.init_user_stats()

    def init_user_stats(self):
        &#34;&#34;&#34;Given a dictionary of stats from Swordie&#39;s DB we add them to User object&#39;s attributes

        Runs near the end of User::__init__(user_stats, database_config).
        It assigns the user attributes in user_stats to their respective protected attributes belonging to
        the User object instance.
        &#34;&#34;&#34;
        self._id = self._user_stats[&#34;id&#34;]
        self._ban_reason = self._user_stats[&#34;banReason&#34;]
        self._vote_points = self._user_stats[&#34;votepoints&#34;]
        self._donation_points = self._user_stats[&#34;donationpoints&#34;]
        self._maple_points = self._user_stats[&#34;maplePoints&#34;]
        self._nx_prepaid = self._user_stats[&#34;nxPrepaid&#34;]
        self._account_type = self._user_stats[&#34;accounttype&#34;]

    @property
    def user_stats(self):
        return self._user_stats

    @property
    def database_config(self):
        return self._database_config

    @property
    def user_id(self):
        return self._id

    @property
    def ban_reason(self):
        return self._ban_reason

    @ban_reason.setter
    def ban_reason(self, reason):
        if len(reason) &lt; 255:
            self.set_stat_by_column(&#34;banReason&#34;, reason)
            self._ban_reason = reason
        else:
            print(&#34;Ban Reason was too long.&#34;)

    @property
    def vote_points(self):
        return self._vote_points

    @vote_points.setter
    def vote_points(self, amount):
        self.set_stat_by_column(&#34;votepoints&#34;, amount)
        self._vote_points = amount

    def add_vote_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current VP count

        Args:
            amount: Int, representing the number of vote points to be added to the current count
        &#34;&#34;&#34;
        new_vp = int(amount) + self.vote_points
        self.vote_points = new_vp

    @property
    def donation_points(self):
        return self._donation_points

    @donation_points.setter
    def donation_points(self, amount):
        self.set_stat_by_column(&#34;donationpoints&#34;, amount)
        self._donation_points = amount

    def add_donation_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current DP count

        Args:
            amount: Int, representing the number of DPs to be added to the current count
        &#34;&#34;&#34;
        new_dp = int(amount) + self.donation_points
        self.donation_points = new_dp

    @property
    def maple_points(self):
        return self._maple_points

    @maple_points.setter
    def maple_points(self, amount):
        self.set_stat_by_column(&#34;maplePoints&#34;, amount)
        self._maple_points = amount

    def add_maple_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current Maple Points pool

        Args:
            amount: Int, representing the number of Maple Points to be added to the current pool
        &#34;&#34;&#34;
        new_maple_points = int(amount) + self.maple_points
        self.maple_points = new_maple_points

    @property
    def account_type(self):
        return self._account_type

    @account_type.setter
    def account_type(self, acc_type):
        self.set_stat_by_column(&#34;accounttype&#34;, acc_type)
        self._account_type = acc_type

    def give_admin(self):
        &#34;&#34;&#34;Sets the user account type to: Admin&#34;&#34;&#34;
        self.account_type = 4

    def give_intern(self):
        &#34;&#34;&#34;Sets the user account type to: Intern&#34;&#34;&#34;
        self.account_type = 3

    def give_tester(self):
        &#34;&#34;&#34;Sets the user account type to: Tester&#34;&#34;&#34;
        self.account_type = 5

    def give_player(self):
        &#34;&#34;&#34;Sets the user account type to: Player&#34;&#34;&#34;
        self.account_type = 0

    def is_admin(self):
        &#34;&#34;&#34;Checks if the user&#39;s account type is: Admin (Strictly)

        Checks if the account type ID associated with the user is 4. Both Int and String types are checked.

        Returns:
            Boolean, representing whether user is Admin (True) or not (False)
        &#34;&#34;&#34;
        return self.account_type == 4 or self.account_type == &#34;4&#34;  # A string check just in case

    def change_password(self, new_pass):
        &#34;&#34;&#34;WARNING: UNSAFE!

        Primitive password change function. It will break in real Swordie-based sources, as Swordie hashes passwords.
        Note: This is not a safe method to use when changing password as it does not hash the password after changing.

        Args:
            new_pass: string, representing the new plaintext password to be set to the database
        &#34;&#34;&#34;
        self.set_stat_by_column(&#34;password&#34;, new_pass)

    def get_acc_type_string(self):
        &#34;&#34;&#34;Fetches the account type of the user in words

        Fetches the account type (Int) from user attributes. Maps the account type to its meaning in words

        Returns:
            String, representing account type
        &#34;&#34;&#34;
        if self.account_type == 4:
            return &#34;Admin&#34;
        elif self.account_type == 0:
            return &#34;Player&#34;
        elif self.account_type == 3:
            return &#34;Intern&#34;
        elif self.account_type == 5:
            return &#34;Tester&#34;

    @property
    def nx_prepaid(self):
        return self._nx_prepaid

    @nx_prepaid.setter
    def nx_prepaid(self, amount):
        self.set_stat_by_column(&#34;nxPrepaid&#34;, amount)
        self._nx_prepaid = amount

    def add_nx_prepaid(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current NX pool

        Args:
            amount: Int, representing the amount of NX to be added to the NX pool
        &#34;&#34;&#34;
        new_nx = int(amount) + self.nx_prepaid
        self.nx_prepaid = new_nx

    def get_stat_by_column(self, column):
        &#34;&#34;&#34;Fetches user attribute by column name

        Returns:
            Int or String, representing user attribute queried
        Raises:
            Generic error on failure
        &#34;&#34;&#34;
        try:
            return self.user_stats[str(column)]
        except Exception as e:
            print(&#34;[ERROR] Error trying to obtain the given column for table users.&#34;, e)

    def set_stat_by_column(self, column, value):
        &#34;&#34;&#34;Sets a user&#39;s attributes by column name in database

        Grabs the database attributes provided through the class constructor.
        Uses these attributes to attempt a database connection.
        Attempts to update the field represented by the provided column in the users table, with the provided value.
        Not recommended to use this alone, as it won&#39;t update the user object which this was used from

        Args:
            value: int or string, representing the value to be set in the database
            column: string, representing the column in the database that is to be updated

        Returns:
            A boolean representing whether the operation was successful.

        Raises:
            SQL Error 2003: Can&#39;t cannect to DB
            WinError 10060: No response from DB
            List index out of range: Wrong column name
        &#34;&#34;&#34;
        host = self._database_config[&#34;host&#34;]
        user = self._database_config[&#34;user&#34;]
        password = self._database_config[&#34;password&#34;]
        schema = self._database_config[&#34;schema&#34;]
        port = self._database_config[&#34;port&#34;]

        try:
            database = con.connect(host=host, user=user, password=password, database=schema, port=port)

            cursor = database.cursor(dictionary=True)
            cursor.execute(f&#34;UPDATE users SET {column} = &#39;{value}&#39; WHERE id = &#39;{self.user_id}&#39;&#34;)
            database.commit()
            print(f&#34;Successfully updated {column} value for user id: {self.user_id}.&#34;)
            self._user_stats[column] = value  # Update the stats in the dictionary
            database.disconnect()
            return True
        except Exception as e:
            print(&#34;[ERROR] Error trying to set stats in database.&#34;, e)
            return False</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="swordie_db.user.User"><code class="flex name class">
<span>class <span class="ident">User</span></span>
<span>(</span><span>user_stats, database_config)</span>
</code></dt>
<dd>
<div class="desc"><p>User object; models SwordieMS users.</p>
<p>Using instance method SwordieDB::get_user_by_username(username) or the SwordieDB::get_char_by_name(name).user getter
will create a User object instance with attributes identical to the user with username "username"
(or IGN "name" for the latter) in the connected Swordie-based database.
This class contains the appropriate getter and setter methods for said attributes.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>account_type</code></strong></dt>
<dd>Integer, representing the level of authority</dd>
<dt><strong><code>ban_reason</code></strong></dt>
<dd>String (256 Char), representing the reason the user is banned</dd>
<dt><strong><code>donation_points</code></strong></dt>
<dd>Integer, representing the amount of DP the user has</dd>
<dt><strong><code>maple_points</code></strong></dt>
<dd>Integer, representing the amount of Maple Points the user has</dd>
<dt><strong><code>nx_prepaid</code></strong></dt>
<dd>Integer, representing the amoung of NX Prepaid the user has</dd>
<dt><strong><code>user_id</code></strong></dt>
<dd>Integer, representing the User ID</dd>
<dt><strong><code>vote_points</code></strong></dt>
<dd>Integer, representing the amount of VP the user has</dd>
</dl>
<p>Emulates how user object is handled server-sided</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>user_stats</code></strong></dt>
<dd>dictionary of user attributes, formatted in SwordieMS style</dd>
<dt><strong><code>database_config</code></strong></dt>
<dd>dictionary of protected attributes from a SwordieDB object</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class User:
    &#34;&#34;&#34;User object; models SwordieMS users.

    Using instance method SwordieDB::get_user_by_username(username) or the SwordieDB::get_char_by_name(name).user getter
    will create a User object instance with attributes identical to the user with username &#34;username&#34;
    (or IGN &#34;name&#34; for the latter) in the connected Swordie-based database.
    This class contains the appropriate getter and setter methods for said attributes.

    Attributes:
        account_type: Integer, representing the level of authority
        ban_reason: String (256 Char), representing the reason the user is banned
        donation_points: Integer, representing the amount of DP the user has
        maple_points: Integer, representing the amount of Maple Points the user has
        nx_prepaid: Integer, representing the amoung of NX Prepaid the user has
        user_id: Integer, representing the User ID
        vote_points: Integer, representing the amount of VP the user has
    &#34;&#34;&#34;

    def __init__(self, user_stats, database_config):
        &#34;&#34;&#34;Emulates how user object is handled server-sided

        Args:
            user_stats: dictionary of user attributes, formatted in SwordieMS style
            database_config: dictionary of protected attributes from a SwordieDB object
        &#34;&#34;&#34;

        self._user_stats = user_stats
        self._database_config = database_config

        self._id = 0
        self._ban_reason = &#34;&#34;
        self._vote_points = 0
        self._donation_points = 0
        self._maple_points = 0
        self._nx_prepaid = 0
        self._account_type = 0
        self.init_user_stats()

    def init_user_stats(self):
        &#34;&#34;&#34;Given a dictionary of stats from Swordie&#39;s DB we add them to User object&#39;s attributes

        Runs near the end of User::__init__(user_stats, database_config).
        It assigns the user attributes in user_stats to their respective protected attributes belonging to
        the User object instance.
        &#34;&#34;&#34;
        self._id = self._user_stats[&#34;id&#34;]
        self._ban_reason = self._user_stats[&#34;banReason&#34;]
        self._vote_points = self._user_stats[&#34;votepoints&#34;]
        self._donation_points = self._user_stats[&#34;donationpoints&#34;]
        self._maple_points = self._user_stats[&#34;maplePoints&#34;]
        self._nx_prepaid = self._user_stats[&#34;nxPrepaid&#34;]
        self._account_type = self._user_stats[&#34;accounttype&#34;]

    @property
    def user_stats(self):
        return self._user_stats

    @property
    def database_config(self):
        return self._database_config

    @property
    def user_id(self):
        return self._id

    @property
    def ban_reason(self):
        return self._ban_reason

    @ban_reason.setter
    def ban_reason(self, reason):
        if len(reason) &lt; 255:
            self.set_stat_by_column(&#34;banReason&#34;, reason)
            self._ban_reason = reason
        else:
            print(&#34;Ban Reason was too long.&#34;)

    @property
    def vote_points(self):
        return self._vote_points

    @vote_points.setter
    def vote_points(self, amount):
        self.set_stat_by_column(&#34;votepoints&#34;, amount)
        self._vote_points = amount

    def add_vote_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current VP count

        Args:
            amount: Int, representing the number of vote points to be added to the current count
        &#34;&#34;&#34;
        new_vp = int(amount) + self.vote_points
        self.vote_points = new_vp

    @property
    def donation_points(self):
        return self._donation_points

    @donation_points.setter
    def donation_points(self, amount):
        self.set_stat_by_column(&#34;donationpoints&#34;, amount)
        self._donation_points = amount

    def add_donation_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current DP count

        Args:
            amount: Int, representing the number of DPs to be added to the current count
        &#34;&#34;&#34;
        new_dp = int(amount) + self.donation_points
        self.donation_points = new_dp

    @property
    def maple_points(self):
        return self._maple_points

    @maple_points.setter
    def maple_points(self, amount):
        self.set_stat_by_column(&#34;maplePoints&#34;, amount)
        self._maple_points = amount

    def add_maple_points(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current Maple Points pool

        Args:
            amount: Int, representing the number of Maple Points to be added to the current pool
        &#34;&#34;&#34;
        new_maple_points = int(amount) + self.maple_points
        self.maple_points = new_maple_points

    @property
    def account_type(self):
        return self._account_type

    @account_type.setter
    def account_type(self, acc_type):
        self.set_stat_by_column(&#34;accounttype&#34;, acc_type)
        self._account_type = acc_type

    def give_admin(self):
        &#34;&#34;&#34;Sets the user account type to: Admin&#34;&#34;&#34;
        self.account_type = 4

    def give_intern(self):
        &#34;&#34;&#34;Sets the user account type to: Intern&#34;&#34;&#34;
        self.account_type = 3

    def give_tester(self):
        &#34;&#34;&#34;Sets the user account type to: Tester&#34;&#34;&#34;
        self.account_type = 5

    def give_player(self):
        &#34;&#34;&#34;Sets the user account type to: Player&#34;&#34;&#34;
        self.account_type = 0

    def is_admin(self):
        &#34;&#34;&#34;Checks if the user&#39;s account type is: Admin (Strictly)

        Checks if the account type ID associated with the user is 4. Both Int and String types are checked.

        Returns:
            Boolean, representing whether user is Admin (True) or not (False)
        &#34;&#34;&#34;
        return self.account_type == 4 or self.account_type == &#34;4&#34;  # A string check just in case

    def change_password(self, new_pass):
        &#34;&#34;&#34;WARNING: UNSAFE!

        Primitive password change function. It will break in real Swordie-based sources, as Swordie hashes passwords.
        Note: This is not a safe method to use when changing password as it does not hash the password after changing.

        Args:
            new_pass: string, representing the new plaintext password to be set to the database
        &#34;&#34;&#34;
        self.set_stat_by_column(&#34;password&#34;, new_pass)

    def get_acc_type_string(self):
        &#34;&#34;&#34;Fetches the account type of the user in words

        Fetches the account type (Int) from user attributes. Maps the account type to its meaning in words

        Returns:
            String, representing account type
        &#34;&#34;&#34;
        if self.account_type == 4:
            return &#34;Admin&#34;
        elif self.account_type == 0:
            return &#34;Player&#34;
        elif self.account_type == 3:
            return &#34;Intern&#34;
        elif self.account_type == 5:
            return &#34;Tester&#34;

    @property
    def nx_prepaid(self):
        return self._nx_prepaid

    @nx_prepaid.setter
    def nx_prepaid(self, amount):
        self.set_stat_by_column(&#34;nxPrepaid&#34;, amount)
        self._nx_prepaid = amount

    def add_nx_prepaid(self, amount):
        &#34;&#34;&#34;Adds the specified amount to the current NX pool

        Args:
            amount: Int, representing the amount of NX to be added to the NX pool
        &#34;&#34;&#34;
        new_nx = int(amount) + self.nx_prepaid
        self.nx_prepaid = new_nx

    def get_stat_by_column(self, column):
        &#34;&#34;&#34;Fetches user attribute by column name

        Returns:
            Int or String, representing user attribute queried
        Raises:
            Generic error on failure
        &#34;&#34;&#34;
        try:
            return self.user_stats[str(column)]
        except Exception as e:
            print(&#34;[ERROR] Error trying to obtain the given column for table users.&#34;, e)

    def set_stat_by_column(self, column, value):
        &#34;&#34;&#34;Sets a user&#39;s attributes by column name in database

        Grabs the database attributes provided through the class constructor.
        Uses these attributes to attempt a database connection.
        Attempts to update the field represented by the provided column in the users table, with the provided value.
        Not recommended to use this alone, as it won&#39;t update the user object which this was used from

        Args:
            value: int or string, representing the value to be set in the database
            column: string, representing the column in the database that is to be updated

        Returns:
            A boolean representing whether the operation was successful.

        Raises:
            SQL Error 2003: Can&#39;t cannect to DB
            WinError 10060: No response from DB
            List index out of range: Wrong column name
        &#34;&#34;&#34;
        host = self._database_config[&#34;host&#34;]
        user = self._database_config[&#34;user&#34;]
        password = self._database_config[&#34;password&#34;]
        schema = self._database_config[&#34;schema&#34;]
        port = self._database_config[&#34;port&#34;]

        try:
            database = con.connect(host=host, user=user, password=password, database=schema, port=port)

            cursor = database.cursor(dictionary=True)
            cursor.execute(f&#34;UPDATE users SET {column} = &#39;{value}&#39; WHERE id = &#39;{self.user_id}&#39;&#34;)
            database.commit()
            print(f&#34;Successfully updated {column} value for user id: {self.user_id}.&#34;)
            self._user_stats[column] = value  # Update the stats in the dictionary
            database.disconnect()
            return True
        except Exception as e:
            print(&#34;[ERROR] Error trying to set stats in database.&#34;, e)
            return False</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="swordie_db.user.User.account_type"><code class="name">var <span class="ident">account_type</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def account_type(self):
    return self._account_type</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.ban_reason"><code class="name">var <span class="ident">ban_reason</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def ban_reason(self):
    return self._ban_reason</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.database_config"><code class="name">var <span class="ident">database_config</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def database_config(self):
    return self._database_config</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.donation_points"><code class="name">var <span class="ident">donation_points</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def donation_points(self):
    return self._donation_points</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.maple_points"><code class="name">var <span class="ident">maple_points</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def maple_points(self):
    return self._maple_points</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.nx_prepaid"><code class="name">var <span class="ident">nx_prepaid</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def nx_prepaid(self):
    return self._nx_prepaid</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.user_id"><code class="name">var <span class="ident">user_id</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def user_id(self):
    return self._id</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.user_stats"><code class="name">var <span class="ident">user_stats</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def user_stats(self):
    return self._user_stats</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.vote_points"><code class="name">var <span class="ident">vote_points</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def vote_points(self):
    return self._vote_points</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="swordie_db.user.User.add_donation_points"><code class="name flex">
<span>def <span class="ident">add_donation_points</span></span>(<span>self, amount)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds the specified amount to the current DP count</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>amount</code></strong></dt>
<dd>Int, representing the number of DPs to be added to the current count</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_donation_points(self, amount):
    &#34;&#34;&#34;Adds the specified amount to the current DP count

    Args:
        amount: Int, representing the number of DPs to be added to the current count
    &#34;&#34;&#34;
    new_dp = int(amount) + self.donation_points
    self.donation_points = new_dp</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.add_maple_points"><code class="name flex">
<span>def <span class="ident">add_maple_points</span></span>(<span>self, amount)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds the specified amount to the current Maple Points pool</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>amount</code></strong></dt>
<dd>Int, representing the number of Maple Points to be added to the current pool</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_maple_points(self, amount):
    &#34;&#34;&#34;Adds the specified amount to the current Maple Points pool

    Args:
        amount: Int, representing the number of Maple Points to be added to the current pool
    &#34;&#34;&#34;
    new_maple_points = int(amount) + self.maple_points
    self.maple_points = new_maple_points</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.add_nx_prepaid"><code class="name flex">
<span>def <span class="ident">add_nx_prepaid</span></span>(<span>self, amount)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds the specified amount to the current NX pool</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>amount</code></strong></dt>
<dd>Int, representing the amount of NX to be added to the NX pool</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_nx_prepaid(self, amount):
    &#34;&#34;&#34;Adds the specified amount to the current NX pool

    Args:
        amount: Int, representing the amount of NX to be added to the NX pool
    &#34;&#34;&#34;
    new_nx = int(amount) + self.nx_prepaid
    self.nx_prepaid = new_nx</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.add_vote_points"><code class="name flex">
<span>def <span class="ident">add_vote_points</span></span>(<span>self, amount)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds the specified amount to the current VP count</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>amount</code></strong></dt>
<dd>Int, representing the number of vote points to be added to the current count</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_vote_points(self, amount):
    &#34;&#34;&#34;Adds the specified amount to the current VP count

    Args:
        amount: Int, representing the number of vote points to be added to the current count
    &#34;&#34;&#34;
    new_vp = int(amount) + self.vote_points
    self.vote_points = new_vp</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.change_password"><code class="name flex">
<span>def <span class="ident">change_password</span></span>(<span>self, new_pass)</span>
</code></dt>
<dd>
<div class="desc"><p>WARNING: UNSAFE!</p>
<p>Primitive password change function. It will break in real Swordie-based sources, as Swordie hashes passwords.
Note: This is not a safe method to use when changing password as it does not hash the password after changing.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>new_pass</code></strong></dt>
<dd>string, representing the new plaintext password to be set to the database</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def change_password(self, new_pass):
    &#34;&#34;&#34;WARNING: UNSAFE!

    Primitive password change function. It will break in real Swordie-based sources, as Swordie hashes passwords.
    Note: This is not a safe method to use when changing password as it does not hash the password after changing.

    Args:
        new_pass: string, representing the new plaintext password to be set to the database
    &#34;&#34;&#34;
    self.set_stat_by_column(&#34;password&#34;, new_pass)</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.get_acc_type_string"><code class="name flex">
<span>def <span class="ident">get_acc_type_string</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Fetches the account type of the user in words</p>
<p>Fetches the account type (Int) from user attributes. Maps the account type to its meaning in words</p>
<h2 id="returns">Returns</h2>
<p>String, representing account type</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_acc_type_string(self):
    &#34;&#34;&#34;Fetches the account type of the user in words

    Fetches the account type (Int) from user attributes. Maps the account type to its meaning in words

    Returns:
        String, representing account type
    &#34;&#34;&#34;
    if self.account_type == 4:
        return &#34;Admin&#34;
    elif self.account_type == 0:
        return &#34;Player&#34;
    elif self.account_type == 3:
        return &#34;Intern&#34;
    elif self.account_type == 5:
        return &#34;Tester&#34;</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.get_stat_by_column"><code class="name flex">
<span>def <span class="ident">get_stat_by_column</span></span>(<span>self, column)</span>
</code></dt>
<dd>
<div class="desc"><p>Fetches user attribute by column name</p>
<h2 id="returns">Returns</h2>
<p>Int or String, representing user attribute queried</p>
<h2 id="raises">Raises</h2>
<p>Generic error on failure</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_stat_by_column(self, column):
    &#34;&#34;&#34;Fetches user attribute by column name

    Returns:
        Int or String, representing user attribute queried
    Raises:
        Generic error on failure
    &#34;&#34;&#34;
    try:
        return self.user_stats[str(column)]
    except Exception as e:
        print(&#34;[ERROR] Error trying to obtain the given column for table users.&#34;, e)</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.give_admin"><code class="name flex">
<span>def <span class="ident">give_admin</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the user account type to: Admin</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_admin(self):
    &#34;&#34;&#34;Sets the user account type to: Admin&#34;&#34;&#34;
    self.account_type = 4</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.give_intern"><code class="name flex">
<span>def <span class="ident">give_intern</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the user account type to: Intern</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_intern(self):
    &#34;&#34;&#34;Sets the user account type to: Intern&#34;&#34;&#34;
    self.account_type = 3</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.give_player"><code class="name flex">
<span>def <span class="ident">give_player</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the user account type to: Player</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_player(self):
    &#34;&#34;&#34;Sets the user account type to: Player&#34;&#34;&#34;
    self.account_type = 0</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.give_tester"><code class="name flex">
<span>def <span class="ident">give_tester</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the user account type to: Tester</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def give_tester(self):
    &#34;&#34;&#34;Sets the user account type to: Tester&#34;&#34;&#34;
    self.account_type = 5</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.init_user_stats"><code class="name flex">
<span>def <span class="ident">init_user_stats</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a dictionary of stats from Swordie's DB we add them to User object's attributes</p>
<p>Runs near the end of User::<strong>init</strong>(user_stats, database_config).
It assigns the user attributes in user_stats to their respective protected attributes belonging to
the User object instance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def init_user_stats(self):
    &#34;&#34;&#34;Given a dictionary of stats from Swordie&#39;s DB we add them to User object&#39;s attributes

    Runs near the end of User::__init__(user_stats, database_config).
    It assigns the user attributes in user_stats to their respective protected attributes belonging to
    the User object instance.
    &#34;&#34;&#34;
    self._id = self._user_stats[&#34;id&#34;]
    self._ban_reason = self._user_stats[&#34;banReason&#34;]
    self._vote_points = self._user_stats[&#34;votepoints&#34;]
    self._donation_points = self._user_stats[&#34;donationpoints&#34;]
    self._maple_points = self._user_stats[&#34;maplePoints&#34;]
    self._nx_prepaid = self._user_stats[&#34;nxPrepaid&#34;]
    self._account_type = self._user_stats[&#34;accounttype&#34;]</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.is_admin"><code class="name flex">
<span>def <span class="ident">is_admin</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if the user's account type is: Admin (Strictly)</p>
<p>Checks if the account type ID associated with the user is 4. Both Int and String types are checked.</p>
<h2 id="returns">Returns</h2>
<p>Boolean, representing whether user is Admin (True) or not (False)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_admin(self):
    &#34;&#34;&#34;Checks if the user&#39;s account type is: Admin (Strictly)

    Checks if the account type ID associated with the user is 4. Both Int and String types are checked.

    Returns:
        Boolean, representing whether user is Admin (True) or not (False)
    &#34;&#34;&#34;
    return self.account_type == 4 or self.account_type == &#34;4&#34;  # A string check just in case</code></pre>
</details>
</dd>
<dt id="swordie_db.user.User.set_stat_by_column"><code class="name flex">
<span>def <span class="ident">set_stat_by_column</span></span>(<span>self, column, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets a user's attributes by column name in database</p>
<p>Grabs the database attributes provided through the class constructor.
Uses these attributes to attempt a database connection.
Attempts to update the field represented by the provided column in the users table, with the provided value.
Not recommended to use this alone, as it won't update the user object which this was used from</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong></dt>
<dd>int or string, representing the value to be set in the database</dd>
<dt><strong><code>column</code></strong></dt>
<dd>string, representing the column in the database that is to be updated</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>A boolean representing whether the operation was successful.</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>SQL Error 2003</code></dt>
<dd>Can't cannect to DB</dd>
<dt><code>WinError 10060</code></dt>
<dd>No response from DB</dd>
<dt><code>List index out</code> of <code>range</code></dt>
<dd>Wrong column name</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_stat_by_column(self, column, value):
    &#34;&#34;&#34;Sets a user&#39;s attributes by column name in database

    Grabs the database attributes provided through the class constructor.
    Uses these attributes to attempt a database connection.
    Attempts to update the field represented by the provided column in the users table, with the provided value.
    Not recommended to use this alone, as it won&#39;t update the user object which this was used from

    Args:
        value: int or string, representing the value to be set in the database
        column: string, representing the column in the database that is to be updated

    Returns:
        A boolean representing whether the operation was successful.

    Raises:
        SQL Error 2003: Can&#39;t cannect to DB
        WinError 10060: No response from DB
        List index out of range: Wrong column name
    &#34;&#34;&#34;
    host = self._database_config[&#34;host&#34;]
    user = self._database_config[&#34;user&#34;]
    password = self._database_config[&#34;password&#34;]
    schema = self._database_config[&#34;schema&#34;]
    port = self._database_config[&#34;port&#34;]

    try:
        database = con.connect(host=host, user=user, password=password, database=schema, port=port)

        cursor = database.cursor(dictionary=True)
        cursor.execute(f&#34;UPDATE users SET {column} = &#39;{value}&#39; WHERE id = &#39;{self.user_id}&#39;&#34;)
        database.commit()
        print(f&#34;Successfully updated {column} value for user id: {self.user_id}.&#34;)
        self._user_stats[column] = value  # Update the stats in the dictionary
        database.disconnect()
        return True
    except Exception as e:
        print(&#34;[ERROR] Error trying to set stats in database.&#34;, e)
        return False</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="swordie_db" href="index.html">swordie_db</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="swordie_db.user.User" href="#swordie_db.user.User">User</a></code></h4>
<ul class="two-column">
<li><code><a title="swordie_db.user.User.account_type" href="#swordie_db.user.User.account_type">account_type</a></code></li>
<li><code><a title="swordie_db.user.User.add_donation_points" href="#swordie_db.user.User.add_donation_points">add_donation_points</a></code></li>
<li><code><a title="swordie_db.user.User.add_maple_points" href="#swordie_db.user.User.add_maple_points">add_maple_points</a></code></li>
<li><code><a title="swordie_db.user.User.add_nx_prepaid" href="#swordie_db.user.User.add_nx_prepaid">add_nx_prepaid</a></code></li>
<li><code><a title="swordie_db.user.User.add_vote_points" href="#swordie_db.user.User.add_vote_points">add_vote_points</a></code></li>
<li><code><a title="swordie_db.user.User.ban_reason" href="#swordie_db.user.User.ban_reason">ban_reason</a></code></li>
<li><code><a title="swordie_db.user.User.change_password" href="#swordie_db.user.User.change_password">change_password</a></code></li>
<li><code><a title="swordie_db.user.User.database_config" href="#swordie_db.user.User.database_config">database_config</a></code></li>
<li><code><a title="swordie_db.user.User.donation_points" href="#swordie_db.user.User.donation_points">donation_points</a></code></li>
<li><code><a title="swordie_db.user.User.get_acc_type_string" href="#swordie_db.user.User.get_acc_type_string">get_acc_type_string</a></code></li>
<li><code><a title="swordie_db.user.User.get_stat_by_column" href="#swordie_db.user.User.get_stat_by_column">get_stat_by_column</a></code></li>
<li><code><a title="swordie_db.user.User.give_admin" href="#swordie_db.user.User.give_admin">give_admin</a></code></li>
<li><code><a title="swordie_db.user.User.give_intern" href="#swordie_db.user.User.give_intern">give_intern</a></code></li>
<li><code><a title="swordie_db.user.User.give_player" href="#swordie_db.user.User.give_player">give_player</a></code></li>
<li><code><a title="swordie_db.user.User.give_tester" href="#swordie_db.user.User.give_tester">give_tester</a></code></li>
<li><code><a title="swordie_db.user.User.init_user_stats" href="#swordie_db.user.User.init_user_stats">init_user_stats</a></code></li>
<li><code><a title="swordie_db.user.User.is_admin" href="#swordie_db.user.User.is_admin">is_admin</a></code></li>
<li><code><a title="swordie_db.user.User.maple_points" href="#swordie_db.user.User.maple_points">maple_points</a></code></li>
<li><code><a title="swordie_db.user.User.nx_prepaid" href="#swordie_db.user.User.nx_prepaid">nx_prepaid</a></code></li>
<li><code><a title="swordie_db.user.User.set_stat_by_column" href="#swordie_db.user.User.set_stat_by_column">set_stat_by_column</a></code></li>
<li><code><a title="swordie_db.user.User.user_id" href="#swordie_db.user.User.user_id">user_id</a></code></li>
<li><code><a title="swordie_db.user.User.user_stats" href="#swordie_db.user.User.user_stats">user_stats</a></code></li>
<li><code><a title="swordie_db.user.User.vote_points" href="#swordie_db.user.User.vote_points">vote_points</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>